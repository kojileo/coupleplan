# CouplePlan 画面一覧・遷移図

## 概要

CouplePlan の新しいアーキテクチャに基づく画面と主要遷移を整理し、実装フェーズに向けた差分や未着手項目を明確にします。本書は 2025-01-27 時点の `Prototype` フォルダと整合し、カップルの絆を深める統合プラットフォームとして設計されています。

---

## 1. 画面一覧

### 認証・初期設定

| screen_id | 画面名                   | 主な目的                                  | 主要アクション                           | 実装状況                       |
| --------- | ------------------------ | ----------------------------------------- | ---------------------------------------- | ------------------------------ |
| AUTH-001  | ログイン・アカウント作成 | メール/パスワードによる認証開始と新規登録 | ログイン、ゲスト利用、パスワードリセット | 実装済（既存認証システム使用） |
| AUTH-003  | プライバシー設定         | 共有範囲・通知設定の管理                  | 設定保存、現在値の取得                   | 実装予定                       |
| AUTH-004  | パートナー連携設定       | カップル連携と招待コード発行              | QR発行、招待送信、連携確定               | 実装予定                       |

### UC-001: AIデートプラン提案・生成

| screen_id | 画面名             | 主な目的                     | 主要アクション                | 実装状況 |
| --------- | ------------------ | ---------------------------- | ----------------------------- | -------- |
| UC001-001 | デートプラン作成   | 条件入力とAI生成リクエスト   | 条件入力、生成開始、履歴参照  | 実装予定 |
| UC001-002 | AI生成中           | 生成状況の可視化と待機体験   | ステータス確認、キャンセル    | 実装予定 |
| UC001-003 | プラン提案         | AIプランの候補提示と比較     | 候補選択、フィードバック送信  | 実装予定 |
| UC001-004 | プラン詳細         | 選択プランの詳細確認と共有   | プラン編集、共有、他UC遷移    | 実装予定 |
| UC001-005 | カスタマイズビュー | 詳細調整と共同編集のエントリ | カスタマイズ開始、UC002へ遷移 | 実装予定 |

### UC-002: カップル共同デートプラン編集

| screen_id | 画面名           | 主な目的                           | 主要アクション               | 実装状況 |
| --------- | ---------------- | ---------------------------------- | ---------------------------- | -------- |
| UC002-001 | 共同編集ボード   | プランの共同編集とリアルタイム同期 | アイテム編集、コメント、承認 | 実装予定 |
| UC002-002 | 編集競合解決     | 編集競合の解消                     | コンフリクト確認、解決適用   | 実装予定 |
| UC002-003 | 編集履歴         | 操作履歴の確認とロールバック       | 履歴閲覧、復元               | 実装予定 |
| UC002-004 | プレビュー       | カップル向けプランレビュー         | プレビュー共有、AI差分提案   | 実装予定 |
| UC002-005 | 承認ワークフロー | 確認と承認ステップ管理             | 承認依頼、進捗更新           | 実装予定 |

### UC-003: ポータル起点統合プラットフォーム

| screen_id | 画面名         | 主な目的                       | 主要アクション               | 実装状況 |
| --------- | -------------- | ------------------------------ | ---------------------------- | -------- |
| UC003-001 | ポータルトップ | ダッシュボード型エントリ       | 概要確認、主要機能遷移       | 実装予定 |
| UC003-002 | デート情報検索 | コンテンツ検索とフィルタリング | キーワード検索、カテゴリ切替 | 実装予定 |
| UC003-003 | 記事詳細       | 記事/スポットの詳細表示        | 共有、保存、UC001遷移        | 実装予定 |
| UC003-004 | アプリ誘導     | ネイティブアプリ訴求とDL導線   | ストア誘導、FAQ参照          | 実装予定 |
| UC003-005 | 利用ガイド     | 機能紹介とオンボーディング     | ステップ確認、動画再生       | 実装予定 |

### UC-004: AI喧嘩仲裁・関係修復

| screen_id | 画面名           | 主な目的                     | 主要アクション                 | 実装状況 |
| --------- | ---------------- | ---------------------------- | ------------------------------ | -------- |
| UC004-001 | 仲裁依頼         | 相談内容の受付               | 相談登録、テンプレ選択         | 実装予定 |
| UC004-002 | 状況分析         | 問題状況の把握と分類         | 分析結果表示、AI質問投げかけ   | 実装予定 |
| UC004-003 | 仲裁提案         | 解決案・タスク提示           | タスク選択、共有               | 実装予定 |
| UC004-004 | 関係改善プラン   | 継続的な改善プラン提供       | スケジュール確認、フォロー設定 | 実装予定 |
| UC004-005 | 振り返りレポート | フィードバックと学びの可視化 | レポート出力、次アクション提示 | 実装予定 |

### UC-005: Date Canvas 共同編集ボード

| screen_id | 画面名       | 主な目的                     | 主要アクション               | 実装状況 |
| --------- | ------------ | ---------------------------- | ---------------------------- | -------- |
| UC005-001 | Date Canvas  | 思い出のビジュアル記録と共有 | メモ編集、描画、マップ共有   | 実装予定 |
| UC005-002 | 位置情報ピン | 位置情報と連携した思い出記録 | ピン配置、メモ追加、共有     | 実装予定 |
| UC005-005 | アルバム生成 | デート写真の自動アルバム生成 | 写真整理、アルバム作成、共有 | 実装予定 |

### UC-007: 段階的マネタイズ制御

| screen_id | 画面名                 | 主な目的                     | 主要アクション               | 実装状況 |
| --------- | ---------------------- | ---------------------------- | ---------------------------- | -------- |
| UC007-001 | 課金管理               | 現在の課金状況管理           | プラン確認、支払い履歴確認   | 実装予定 |
| UC007-002 | 機能解放               | 段階的アンロック管理         | アップグレード申込、権限確認 | 実装予定 |
| UC007-003 | 課金変更通知           | 課金変更の通知設定           | アラート設定、連携設定       | 実装予定 |
| UC007-004 | 課金指標分析           | 収益指標分析とアクション提案 | メトリクス確認、施策起票     | 実装予定 |
| UC007-005 | サブスクリプション管理 | サブスク契約全体の統制       | 契約切替、キャンセル         | 実装予定 |

### 共通・システム

| screen_id  | 画面名           | 主な目的                         | 主要アクション                 | 実装状況                       |
| ---------- | ---------------- | -------------------------------- | ------------------------------ | ------------------------------ |
| COMMON-001 | ダッシュボード   | 全体サマリーとショートカット表示 | KPI確認、ショートカット起動    | 実装済（新しいダッシュボード） |
| COMMON-002 | 設定             | 全体設定とアカウント管理         | 設定保存、再認証               | 実装予定                       |
| COMMON-003 | ヘルプセンター   | サポートFAQと問い合わせ導線      | FAQ閲覧、問い合わせ起票        | 実装予定                       |
| COMMON-004 | エラー画面       | 臨時障害時の案内                 | リトライ、サポート遷移         | 実装予定                       |
| COMMON-005 | オフラインモード | オフライン時の案内               | 再接続、ローカルキャッシュ表示 | 実装予定                       |

### 認証・パスワード管理

| screen_id   | 画面名             | 主な目的                    | 主要アクション               | 実装状況 |
| ----------- | ------------------ | --------------------------- | ---------------------------- | -------- |
| AUTH-LOGIN  | ログイン           | メール/パスワードによる認証 | ログイン、パスワードリセット | 実装済   |
| AUTH-SIGNUP | アカウント作成     | 新規ユーザー登録            | アカウント作成、メール認証   | 実装済   |
| AUTH-FORGOT | パスワードリセット | パスワード忘れ時のリセット  | リセットメール送信           | 実装済   |
| AUTH-RESET  | パスワード再設定   | 新しいパスワードの設定      | パスワード更新               | 実装済   |
| AUTH-VERIFY | メール認証         | メールアドレスの認証        | 認証コード確認               | 実装済   |

---

## 2. 主要遷移フロー

### 2.1 オンボーディング

```
[LP/外部導線]
    ↓
[AUTH-LOGIN ログイン / AUTH-SIGNUP アカウント作成]
    ├─ 新規登録 → [AUTH-VERIFY メール認証] → [AUTH-003 プライバシー設定] → [COMMON-001 ダッシュボード]
    ├─ ログイン成功 → [COMMON-001 ダッシュボード]
    ├─ パスワード忘れ → [AUTH-FORGOT パスワードリセット] → [AUTH-RESET パスワード再設定]
    └─ ゲスト開始 → [UC003-001 ポータルトップ] (機能制限あり)
```

### 2.2 デートプラン生成〜共同編集

```
[COMMON-001 ダッシュボード]
    ↓ 「AIデートプラン提案」
[UC001-001 デートプラン作成]
    ↓ AI生成開始
[UC001-002 AI生成中]
    ↓ 完了
[UC001-003 プラン提案]
    ├─ プラン確定 → [UC001-004 プラン詳細]
    └─ 再生成/フィードバック → [UC001-001]
[UC001-004 プラン詳細]
    ├─ カスタマイズ → [UC001-005 カスタマイズビュー]
    └─ 共同編集 → [UC002-001 共同編集ボード]
```

### 2.3 AI喧嘩仲裁・関係修復

```
[COMMON-001 ダッシュボード]
    ↓ 「関係修復」
[UC004-001 仲裁依頼]
    ↓
[UC004-002 状況分析]
    ↓
[UC004-003 仲裁提案]
    ├─ 継続ケア → [UC004-004 関係改善プラン]
    └─ レポート → [UC004-005 振り返りレポート]
```

### 2.4 段階的マネタイズ制御

```
[COMMON-001 ダッシュボード]
    ↓ 「設定・管理」
[UC007-001 課金管理]
    ├─ プラン変更 → [UC007-002 機能解放]
    ├─ 課金通知設定 → [UC007-003 課金変更通知]
    ├─ 売上分析 → [UC007-004 課金指標分析]
    └─ サブスク管理 → [UC007-005 サブスクリプション管理]
```

### 2.5 Date Canvas 共同編集ボード

```
[COMMON-001 ダッシュボード]
    ↓ 「Date Canvas」
[UC005-001 Date Canvas]
    ├─ メモ編集 → 保存
    ├─ 位置情報ピン → [UC005-002 位置情報ピン]
    └─ アルバム生成 → [UC005-005 アルバム生成]
```

---

## 3. ナビゲーション仕様メモ

- 全画面共通のグローバルナビ: ログイン、ダッシュボード、ヘルプ（`../common/COMMON-003.html`）。
- フッターメニュー: AIデートプラン、共同編集、Date Canvas、関係修復、設定、ヘルプ。
- 新しいアーキテクチャでは、ダッシュボードを起点とした統合ナビゲーションを採用。
- 画面遷移は `Prototype/js/navigation.js` の `navigateTo(url)` を標準化。SPA 化時も同じルーティングIDを利用予定。

---

## 4. 実装フェーズで必要な差分

1. 新しいアーキテクチャに基づく画面実装は、`screensdocs` フォルダの実装指示書を参照して進めてください。
2. ダッシュボード（COMMON-001）は既に実装済みで、他の画面は実装予定として段階的に開発します。
3. 本ドキュメントは `screensdocs` の画面仕様書と連動させて維持してください。
4. プロトタイプ画面は新しいアプリ構造に合わせて整理・更新が必要です。
